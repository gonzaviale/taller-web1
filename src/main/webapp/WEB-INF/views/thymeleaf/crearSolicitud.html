<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Publicar</title>
</head>
<body>
<header th:replace="fragments/header :: header"></header>




<form action="#" th:action="@{/procesarSolicitudaBanco}" method="post" class="mt-4">
    <input type="hidden" name="bancoId" th:value="${bancoId}" />
    <input type="hidden" name="usuarioId" th:value="${usuarioId}" />
    <input type="hidden" name="estado" value="pendiente" />

    <div class="form-group">
        <label for="tipoProducto">Tipo de Producto:</label>
        <input type="text" class="form-control" id="tipoProducto" name="tipoProducto" th:value="${tipoProducto}" readonly>
    </div>

    <div class="form-group">
        <label for="tipoSangre">Tipo de Sangre:</label>
        <input type="text" class="form-control" id="tipoSangre" name="tipoSangre" th:value="${tipoSangre}" readonly>
    </div>

    <div class="form-group">
        <label for="cantidad">Cantidad Disponible:</label>
        <input type="number" class="form-control" id="cantidad" name="cantidad" th:value="${cantidad}" readonly>
    </div>

    <button type="submit" class="btn btn-success">Confirmar Solicitud</button>
</form>

















<!-- Incluimos Bootstrap JS y Popper.js para la funcionalidad de validación -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"></script>

<!-- Script para la validación de formulario -->
<script>
    (function () {
        'use strict'

        let firstAttempt = true;

        // Seleccionamos el formulario
        const form = document.getElementById('formPublicacion');

        form.addEventListener('submit', function (event) {
            // Prevenimos el envío del formulario si no es válido
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();

                // Si es el primer intento, mostramos una alerta
                if (firstAttempt) {
                    alert("Por favor, complete los campos obligatorios: Título, Tipo de Sangre, y Tipo de Publicación.");
                    firstAttempt = false;  // Cambiamos el estado para permitir el segundo intento
                } else {
                    form.classList.add('was-validated');  // Aplicamos la validación visual de Bootstrap
                }
            } else {
                form.classList.add('was-validated');  // Si el formulario es válido, lo dejamos enviar
            }
        }, false);
    })();
</script>


</body>
</html>