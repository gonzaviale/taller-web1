<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Mascota Donante</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/main.css}"/>
</head>
<body>
<h1>Formulario de Mascota Donante</h1>

<form th:action="@{/agregar-donante}" method="POST" accept-charset="UTF-8" th:object="${mascota}" enctype="multipart/form-data">
    <label>¿Tu mascota alguna vez recibió una transfusión?</label><br>
    <input type="radio" id="si" name="transfusion" value="Si">
    <label for="si">Si</label>
    <input type="radio" id="no" name="transfusion" value="No">
    <label for="no">No</label><br><br>

    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" placeholder="Nombre" th:field="*{nombre}"><br><br>

    <label for="anios">Años:</label>
    <input type="number" id="anios" placeholder="Años" th:field="*{anios}"><br><br>

    <label for="peso">Peso:</label>
    <input type="number" step="0.1" id="peso" placeholder="Peso (kg)" th:field="*{peso}"><br><br>

    <label>Tipo de Mascota:</label><br>
    <input type="radio" id="felino" name="tipo" value="Felino" th:field="*{tipo}">
    <label for="felino">Felino</label>
    <input type="radio" id="canino" name="tipo" value="Canino" th:field="*{tipo}">
    <label for="canino">Canino</label><br><br>

    <div id="estudios-gato">
        <h3>Estudios requeridos para Gatos</h3>
        <ul>
            <li>FeLV (Virus de la Leucemia Felina)</li>
            <li>FIV (Virus de la Inmunodeficiencia Felina)</li>
            <li>Hemoplasmas</li>
            <li>Exámenes recientes de sangre</li>
            <li>Vacunaciones y desparasitaciones al día</li>
        </ul>
    </div>

    <div id="estudios-perro">
        <h3>Estudios requeridos para Perros</h3>
        <ul>
            <li>PCR (Reacción en Cadena de la Polimerasa)</li>
            <li>Exámenes recientes de sangre</li>
        </ul>
    </div>
    <label for="imagenes">Subir imágenes de los estudios:</label><br>
    <input type="file" id="imagenes" name="imagenes" multiple accept="image/*"><br><br>

    <button type="submit">Registrar</button>
</form>
<p th:if="${errorTransfusion != null}" class="alert alert-danger" th:text="'Error: ' + ${errorTransfusion}">
</p>
<script>
    // Función para verificar la transfusión
    function verificarTransfusion() {
        var transfusionSi = document.getElementById('si');
        if (transfusionSi.checked) {
            alert("No se pueden registrar mascotas que hayan sido transfundidas como donantes.");
            transfusionSi.checked = false;  // Deselecciona la opción "Sí"
        }
    }

    // Función para mostrar estudios de gatos o perros
    function mostrarEstudios() {
        var tipoFelino = document.getElementById('felino');
        var tipoCanino = document.getElementById('canino');
        var estudiosGato = document.getElementById('estudios-gato');
        var estudiosPerro = document.getElementById('estudios-perro');

        if (tipoFelino.checked) {
            estudiosGato.style.display = 'block';
            estudiosPerro.style.display = 'none';
        } else if (tipoCanino.checked) {
            estudiosGato.style.display = 'none';
            estudiosPerro.style.display = 'block';
        }
    }
</script>
<script type="text/javascript" th:src="@{webjars/bootstrap/5.2.0/js/bootstrap.min.js}"></script>
</body>
</html>